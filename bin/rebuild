#!/usr/bin/env bash

create_diff() {
    local name="${1}"
    local tag="${2}"

    echo "create ${name}-config.diff"
    cd "${name}"
    git diff "${tag}" > "../${name}-config.diff"
    cd - > /dev/null
}

cd /etc/nixos

# dmenu
create_diff dmenu 4.6

# dwm
create_diff dwm 6.1

# slock
create_diff slock 1.4

echo "nixos-rebuild"
nixos-rebuild "${1}"
